{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>My Tasks</title>
    <style>
        body { font-family: Arial; background:#f4f4f4; }
        .container { width:90%; max-width:1000px; margin:30px auto; background:#fff; padding:20px; border-radius:10px; }
        table { width:100%; border-collapse:collapse; }
        th, td { border:1px solid #ccc; padding:10px; text-align:center; }
        th { background:#007bff; color:#fff; }
        .completed { color:green; font-weight:bold; }
        .pending { color:orange; font-weight:bold; }
        .btn { padding:6px 12px; border:none; border-radius:5px; cursor:pointer; }
        .btn-complete { background:green; color:white; }
    </style>
</head>
<body>

<div class="container">
    <h2>My Task List</h2>

    <table>
        <tr>
            <th>Task</th>
            <th>Priority</th>
            <th>Status</th>
            <th>Start</th>
            <th>Due</th>
            <th>Completed Date</th>
            <th>Action</th>
        </tr>

        {% for task in tasks %}
        <tr>
            <td>{{ task.task_title }}</td>
            <td>{{ task.priority }}</td>
            <td>
                {% if task.status == "Completed" %}
                    <span class="completed">Completed</span>
                {% else %}
                    <span class="pending">{{ task.status }}</span>
                {% endif %}
            </td>
            <td>{{ task.start_date }}</td>
            <td>{{ task.due_date }}</td>
            <td>{{ task.completed_date|default:"-" }}</td>
            <td>
                {% if task.status != "Completed" %}
                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="task_id" value="{{ task.id }}">
                    <button class="btn btn-complete" type="submit">Complete</button>
                </form>
                {% else %}
                    âœ”
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="7">No tasks assigned.</td>
        </tr>
        {% endfor %}
    </table>
</div>

</body>
</html>
